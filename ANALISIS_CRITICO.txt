â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ANÃLISIS CRÃTICO DE MIGRACIÃ“N - Access a Laravel
17 de Octubre de 2025
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ESTADO ACTUAL: 45-50% completado
PROGRESO REAL: PAA bÃ¡sico OK, pero falta RF-3 y siguientes

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1. HALLAZGOS CRÃTICOS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ”´ CRÃTICO #1: CONTROL DE ACCESO INCOMPLETO
   - Middleware 'role' NO estÃ¡ registrado en Kernel.php
   - Rutas PAA sin protecciÃ³n de roles
   - Auditados pueden crear/editar PAAs (GRAVE)
   - Auditores pueden aprobar PAAs (solo Jefe debe)
   
   IMPACTO: Alto - ViolaciÃ³n de seguridad

ğŸ”´ CRÃTICO #2: FALTA LA MATRIZ DE PRIORIZACIÃ“N (RF-3.1)
   - NO existe tabla 'matriz_priorizacion'
   - NO existe modelo 'MatrizPriorizacion'
   - Sin riesgos (Extremo, Alto, Moderado, Bajo)
   - Sin ciclos de rotaciÃ³n automÃ¡ticos
   - Video Access muestra esto como fundamental
   
   IMPACTO: BLOQUEANTE para Programa de AuditorÃ­a

ğŸ”´ CRÃTICO #3: PROGRAMA DE AUDITORÃA VACÃO (RF-3.3)
   - NO existe tabla 'programa_auditoria_interna'
   - NO existe el traslado automÃ¡tico desde matriz
   - Los auditores no pueden ver quÃ© auditar
   - No hay aprobaciÃ³n del ComitÃ© ICCCI
   
   IMPACTO: Sistema no puede ejecutar auditorÃ­as

ğŸŸ  IMPORTANTE: LÃ“GICA DE CASCADA INCOMPLETA
   En Access: PAA â†’ Tareas por rol OCI â†’ Seguimientos â†’ Evidencias
   En Laravel: Falta validar que cada nivel respete la cascada
   - Â¿PAA en estado 'elaboracion' permite crear tareas? âœ“
   - Â¿PAA en estado 'finalizado' permite crear tareas? âœ— (debe validar)
   - Â¿Se eliminan tareas si PAA se anula? Â¿O se copia a historial?

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2. COMPARACIÃ“N: ACCESS vs LARAVEL (SegÃºn transcripciÃ³n)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

FLUJO EN ACCESS:
1. Parametrizar funcionarios, roles OCI, entidades control
2. Crear PAA con fecha y jefe responsable
3. Agregar tareas por cada rol OCI (5 roles)
   - Cada tarea con: descripciÃ³n, fechas, responsable, comentarios
   - Comentarios pueden indicar frecuencia (ej: "semestral" = 2 puntos control)
4. Crear PUNTOS DE CONTROL por tarea
   - Cada punto: observaciÃ³n, estado (realizado/pendiente/anulado)
   - EvaluaciÃ³n: bien/mal/pendiente
   - Ente de control relacionado
   - Evidencia adjunta
5. Ver RESUMEN DE CUMPLIMIENTO
   - % de avance por PAA
   - % de avance por rol OCI
   - GrÃ¡ficos de estado

MATRIZ DE PRIORIZACIÃ“N:
- Selecciona quÃ© PROCESOS auditar (estratÃ©gicos, misionales, apoyo)
- Asigna nivel de riesgo (manual: Extremo, Alto, Moderado, Bajo)
- Sistema calcula ponderaciÃ³n automÃ¡tica
- Calcula dÃ­as desde Ãºltima auditorÃ­a
- Ciclo de rotaciÃ³n automÃ¡tico:
  * Extremo â†’ Cada aÃ±o
  * Alto â†’ Cada 2 aÃ±os
  * Moderado â†’ Cada 3 aÃ±os
  * Bajo â†’ No se audita

PROGRAMA DE AUDITORÃA:
- Traslada automÃ¡ticamente procesos PRIORIZADOS de la matriz
- Define objetivos, alcances, criterios
- Asigna recursos y fechas
- Requiere aprobaciÃ³n del ComitÃ© ICCCI
- Genera formato FR-GCA-001

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
3. VALIDACIONES NECESARIAS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ“ DEBE VALIDAR:

1. SEGURIDAD POR ROL:
   â–¡ Super Admin: Acceso total a TODO
   â–¡ Jefe Auditor: Crear/editar/aprobar PAA, crear programa
   â–¡ Auditor: Ver PAA, ejecutar tareas, crear seguimientos/evidencias
   â–¡ Auditado: Ver solo sus auditorÃ­as, presentar controversias

2. TRANSICIONES DE ESTADO:
   â–¡ PAA: elaboracion â†’ aprobado â†’ en_ejecucion â†’ finalizado
   â–¡ Tarea: pendiente â†’ en_proceso â†’ realizada
   â–¡ Seguimiento: pendiente â†’ realizado/anulado
   â–¡ Â¿Se puede anular desde cualquier estado? Validar

3. CASCADA DE DATOS:
   â–¡ Si elimino PAA, Â¿quÃ© pasa con tareas y seguimientos?
   â–¡ Si cambio estado de PAA a 'finalizado', Â¿bloqueo nuevas tareas?
   â–¡ Si anulo tarea, Â¿quÃ© pasa con sus seguimientos?

4. CÃLCULO DE CUMPLIMIENTO:
   â–¡ % por rol OCI = (seguimientos realizados / total) * 100
   â–¡ % total PAA = (seguimientos realizados en todas tareas / total) * 100
   â–¡ Filtrar por auditor si es el usuario actual

5. EVIDENCIAS:
   â–¡ Â¿Se validan extensiones? (PDF, Word, Excel, ImÃ¡genes)
   â–¡ Â¿TamaÃ±o mÃ¡ximo 2MB?
   â–¡ Â¿Se eliminan al actualizar seguimiento?
   â–¡ Â¿RelaciÃ³n polimÃ³rfica permite mÃºltiples tipos?

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
4. ORDEN DE PRIORIDAD RECOMENDADO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

INMEDIATO (Esta semana):
  1. Registrar middleware 'role' en Kernel.php
  2. Agregar autorizaciÃ³n en rutas de PAA
  3. Validar controladores PAA respetan roles

PRÃ“XIMA SEMANA:
  4. Implementar MatrizPriorizacion (modelo, controlador, vistas)
  5. Agregar lÃ³gica de riesgos y cÃ¡lculo de rotaciÃ³n
  6. Validar cascada de datos PAA â†’ Tareas â†’ Seguimientos

SEMANA SIGUIENTE:
  7. Implementar ProgramaAuditoria con traslado automÃ¡tico
  8. Agregar aprobaciÃ³n del ComitÃ© ICCCI
  9. Generar formato FR-GCA-001

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
5. ARCHIVOS QUE NECESITAN CAMBIOS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

CAMBIOS INMEDIATOS:
- app/Http/Middleware/Kernel.php â†’ Registrar middleware 'role'
- routes/web.php â†’ Agregar middleware a rutas PAA
- app/Http/Controllers/PAA/PAAController.php â†’ Validaciones
- app/Http/Controllers/PAA/PAATareaController.php â†’ Validaciones
- app/Http/Controllers/PAA/PAASeguimientoController.php â†’ Validaciones

NUEVOS ARCHIVOS:
- app/Models/MatrizPriorizacion.php
- app/Models/ProgramaAuditoria.php
- app/Http/Controllers/Parametrizacion/MatrizPriorizacionController.php
- app/Http/Controllers/Parametrizacion/ProgramaAuditoriaController.php
- database/migrations/XXXX_create_matriz_priorizacion_table.php
- database/migrations/XXXX_create_programa_auditoria_table.php
- resources/views/matriz-priorizacion/*
- resources/views/programa-auditoria/*

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
6. PREGUNTAS CLAVE ANTES DE IMPLEMENTAR
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. Â¿Cada PAA pertenece a una entidad/municipio especÃ­fico?
   â†’ SÃ­, hay municipio_id en PAA
   â†’ Â¿Auditor debe ver PAAs de su municipio solamente?

2. Â¿Un auditor puede ser responsable de mÃºltiples tareas?
   â†’ SÃ­, puede (aunque en video de Access parecerÃ­a ser uno per tarea)
   â†’ Â¿Filtrar PAAs por auditor asignado?

3. Â¿El cÃ¡lculo de cumplimiento es por PAA total o por rol?
   â†’ En Access: Ambos
   â†’ % por rol OCI (5 dashboards)
   â†’ % total del PAA (1 dashboard)

4. Â¿Las evidencias se pueden cargar en cualquier momento?
   â†’ SÃ­, pero solo en seguimientos realizados
   â†’ Â¿Bloquear si seguimiento estÃ¡ pendiente?

5. Â¿La aprobaciÃ³n del ComitÃ© ICCCI es manual?
   â†’ SÃ­, Jefe Auditor debe seleccionar "ComitÃ© aprobÃ³"
   â†’ Â¿O es automÃ¡tica si programa es vÃ¡lido?

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
SIGUIENTE PASO: Esperar tus respuestas para validaciones
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
